# Gate Security App - Setup Guide

This guide will help you set up your environment for the Gate Security App using Supabase.

## Prerequisites

- Node.js and npm installed
- Supabase project created at [supabase.com](https://supabase.com)
- Personal Access Token (PAT) from Supabase [Account > Access Tokens](https://supabase.com/dashboard/account/tokens)

## Setup Options

### Option 1: Remote-only Setup

For users who want to use the remote Supabase instance only (no local development):

1. Ensure you have `.env.local` file with your Supabase URL and anon key:

```
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_ACCESS_TOKEN=your-access-token-starting-with-sbp_
```

2. Run the setup script:

```bash
chmod +x scripts/supabase-setup.sh
./scripts/supabase-setup.sh
```

This script will:
- Link to your Supabase project
- Push database migrations (optional)
- Seed the database with initial data (optional)

### Option 2: With Local Development (Docker required)

For full local development with Docker:

1. Install Docker (if not already installed):

```bash
sudo ./scripts/install-docker.sh
```

2. After installing Docker, log out and back in for Docker permissions to take effect, or run:

```bash
newgrp docker
```

3. Run the Supabase local development script:

```bash
./scripts/supabase-local-dev.sh
```

This will start Supabase services locally, including PostgreSQL, PostgREST, and more.

4. In a new terminal, you can now set up your remote connection:

```bash
./scripts/supabase-setup.sh
```

## Troubleshooting

### "Invalid access token format" error
- Make sure your Supabase access token starts with `sbp_`
- Generate a new token from [Supabase Dashboard > Account > Access Tokens](https://supabase.com/dashboard/account/tokens)

### Docker permission errors
- Make sure you've logged out and back in after installing Docker
- If that doesn't work, try running `newgrp docker` or restarting your machine

### Database connection errors
- Check your internet connection
- Disable any VPNs that might be blocking connections
- Verify that your Supabase project is active

## Configuration Files

- `.env.local`: Contains your Supabase credentials and URLs
- `supabase/config.toml`: Generated by Supabase init, contains local configuration
- `supabase/seed.sql`: Contains initial data for your database

For more detailed information about Supabase, visit the [Supabase Documentation](https://supabase.com/docs). 